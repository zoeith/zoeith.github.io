<!DOCTYPE html>
<html>
  <head>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-72429926-1', 'auto');
  ga('send', 'pageview');

  </script>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Votes and Spending&#58;</br> The 2015 Philadelphia Democratic Primary City Council Race</title>
  <meta name="description" content="This analysis combines two data sources:  campaign finance data and election results from the city commissioner. The finance data does not contain perfect in...">


  <link rel="stylesheet" href="/css/tufte.css">


  <!-- Google Fonts loaded here depending on setting in _data/options.yml true loads font, blank does not-->
  
    <link href='//fonts.googleapis.com/css?family=Lato:400,400italic' rel='stylesheet' type='text/css'>
  
  <!-- Load up MathJax script if needed ... specify in /_data/options.yml file-->
  
    <script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  

  <link rel="canonical" href="http://zoeith.com/articles/16/basic-vote-analysis-2015-01-13">
  <link rel="alternate" type="application/rss+xml" title="Zoey S. Davidson" href="http://zoeith.com/feed.xml" />
</head>

  <body>
    <!--- Header and nav template site-wide -->
<header>
    <nav class="group">
	<!--- <a href="/"><img class="badge" src="/assets/img/badge_1.png" alt="CH"></a> -->
	
		
		    
		      <a href="/">blog</a>
		    
	    
  	
		
		    
		      <a href="/about/">About</a>
		    
	    
  	
		
  	
	</nav>
</header>

    <article class="group">
      <h1>Votes and Spending&#58;</br> The 2015 Philadelphia Democratic Primary City Council Race</h1>
<p class="subtitle">January 18, 2016</p>


<p><span class="newthought">This analysis combines two data sources:</span>  campaign finance data and election results from the city commissioner. The finance data does not contain perfect infromation. The current filing system does not appear to check for consistency in spelling across filings, nor does it require all relevant data fields to be completed. Furthermore, there is no standard for keywords for certain types of expenses. For instance, expenses listed as “donations” to Ward committees may actually be in exchange for “get out the vote” work by the committees. These and other shortcomings in the filing system limit the scope of this analysis at present considerably. However, I find a nearly logarithmic relation between expenditures in the filing cycle leading up to the election and the percentage of votes won. <label for="logistic-growth" class="margin-toggle"> ⊕</label><input type="checkbox" id="logistic-growth" class="margin-toggle" /><span class="marginnote">Since there is an upper bound of 1 on the voter percentage, it is probably more accurate to call this logistic growth. </span><br />
<!--more--></p>

<h2 id="loading-the-data">Loading the data.</h2>
<p>Here we download data directly from the sources.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">urllib2</span>

<span class="n">csv_dtype</span> <span class="o">=</span> <span class="p">{</span><span class="s">'EntityZip'</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
             <span class="s">'EmployerZip'</span><span class="p">:</span> <span class="nb">str</span><span class="p">}</span>

<span class="n">data_url</span> <span class="o">=</span> <span class="s">'ftp://ftp.phila-records.com/Year-to-Date</span><span class="si">%20</span><span class="s">Transaction</span><span class="si">%20</span><span class="s">Files/2015</span><span class="si">%20</span><span class="s">YTD/Explorer.Transactions.2015.YTD.txt'</span>
<span class="n">data_stream</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">data_url</span><span class="p">)</span>
<span class="c">#Year to date (YTD)</span>
<span class="n">ytddata</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data_stream</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s">'</span><span class="se">\t</span><span class="s">'</span><span class="p">,</span><span class="n">quotechar</span><span class="o">=</span><span class="s">'"'</span><span class="p">,</span>
                      <span class="n">error_bad_lines</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">csv_dtype</span><span class="p">)</span>

<span class="n">vote_url</span> <span class="o">=</span> <span class="s">'http://www.philadelphiavotes.com/files/raw-data/2015_primary.csv'</span>
<span class="n">vote_stream</span> <span class="o">=</span> <span class="n">urllib2</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">vote_url</span><span class="p">)</span>
<span class="n">primary_2015</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">vote_stream</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s">','</span><span class="p">)</span></code></pre></figure>

<h2 id="filtering-data">Filtering data</h2>
<p>Here we focus on cycle 3 to isolate the spending that occured up to the day of the primary. This includes most (though not all) of the get out the vote expenditures. <label for="filing-cycles" class="margin-toggle sidenote-number"></label><input type="checkbox" id="filing-cycles" class="margin-toggle" /><span class="sidenote">See filing date <a href="http://www.phila.gov/records/pdfs/CFFILINGDATES.pdf">information</a>. </span></p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">cycle3_data</span> <span class="o">=</span> <span class="n">ytddata</span><span class="p">[</span><span class="n">ytddata</span><span class="o">.</span><span class="n">Cycle</span><span class="o">==</span><span class="mi">3</span><span class="p">]</span>
<span class="k">print</span> <span class="s">"Total number of entries in YTD campaing filings: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ytddata</span><span class="p">))</span>
<span class="k">print</span> <span class="s">"Number of lines in cycle 3 filing: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">cycle3_data</span><span class="p">))</span></code></pre></figure>

<div class="highlighter-rouge"><pre class="highlight"><code>Total number of entries in YTD campaing filings: 210472
Number of lines in cycle 3 filing: 25537
</code></pre>
</div>

<p>I am limiting the scope of this analysis to only the Primary for Democratic seats on City Council. I am relying on a hand built table that connects the names of candidates as they appear in the city commissioners’ data with how they appear in entries on campaign finance reports. <label for="Phily3-thanks" class="margin-toggle sidenote-number"></label><input type="checkbox" id="Phily3-thanks" class="margin-toggle" /><span class="sidenote">This table was assembled by the kind people at <a href="https://www.philadelphia3-0.org/">Philly 3.0</a> after selecting a unique entry list of FilerNames from the finance data. </span> Note, candidates may have a committee filing name and a personal filing name. I combine personal and committee spending into a single entity, but this may also require removing contributions to a committee so they do not get double counted when summing expenditures.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">tags_url</span> <span class="o">=</span> <span class="s">'psi-6-2015-01-11_files/'</span>
<span class="n">tags_data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">tags_url</span><span class="o">+</span><span class="s">'atlcouncilfilers.csv'</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s">','</span><span class="p">)</span>
<span class="k">print</span> <span class="n">tags_data</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span></code></pre></figure>

<div class="highlighter-rouge"><pre class="highlight"><code>['idx' 'Filers' 'Party' 'Office Sought' 'District' 'VotesName']
</code></pre>
</div>

<p>The ‘Filers’ column contains the names on the finance data. ‘VotesName’ column contains the candidates name as found in commissioners voting data.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">dem_tags</span> <span class="o">=</span> <span class="n">tags_data</span><span class="p">[</span><span class="n">tags_data</span><span class="o">.</span><span class="n">Party</span><span class="o">==</span><span class="s">'Dem'</span><span class="p">]</span>
<span class="n">at_large_dem_cc_cycle3</span> <span class="o">=</span> <span class="n">cycle3_data</span><span class="p">[</span><span class="n">cycle3_data</span><span class="o">.</span><span class="n">FilerName</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">dem_tags</span><span class="o">.</span><span class="n">Filers</span><span class="o">.</span><span class="n">values</span><span class="p">)]</span>
<span class="k">print</span> <span class="s">"Number of lines in cycle 3 filing for</span><span class="se">\
</span><span class="s"> Democrats running for city council at large: "</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">at_large_dem_cc_cycle3</span><span class="p">))</span></code></pre></figure>

<div class="highlighter-rouge"><pre class="highlight"><code>Number of lines in cycle 3 filing for        Democrats running for city council at large: 2236
</code></pre>
</div>

<p>So only a small fraction of lines in the original finance data are for the 16 candidates running as Democrats for at large spots on City Council. There are several types of data in the <code class="highlighter-rouge">DocType</code> column:</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">print</span> <span class="n">at_large_dem_cc_cycle3</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span>
<span class="k">print</span> <span class="s">'</span><span class="se">\n</span><span class="s"> Document types:'</span>
<span class="k">print</span> <span class="n">at_large_dem_cc_cycle3</span><span class="o">.</span><span class="n">DocType</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span></code></pre></figure>

<div class="highlighter-rouge"><pre class="highlight"><code>['FilerName' 'Year' 'Cycle' 'DocType' 'EntityName' 'EntityAddressLine1'
 'EntityAddressLine2' 'EntityCity' 'EntityState' 'EntityZip' 'Occupation'
 'EmployerName' 'EmployerAddressLine1' 'EmployerAddressLine2'
 'EmployerCity' 'EmployerState' 'EmployerZip' 'Date' 'Amount' 'Description'
 'Amended' 'SubDate' 'FiledBy']

 Document types:
['Campaign Finance Report (Cover Page)'
 'CFR - Schedule I - Part C - Contributions Received From Political Committees (Over $250.00)'
 'Campaign Finance Statement'
 'CFR - Schedule IV - Statement of Unpaid Depts'
 'CFR - Schedule III - Statement of Expenditures'
 'CFR - Schedule I - Part E - Other Receipts'
 'CFR - Schedule II - Part G - In-Kind Contributions Received (Value Over $250.00)'
 'CFR - Schedule II - Part F - In-Kind Contributions Received (Value of $50.01 to $250.00)'
 'CFR - Schedule I - Part B - All Other Contributions ($50.01 - $250.00)'
 'CFR - Schedule I - Part D - All Other Contributions (Over $250.00)'
 'CFR - Schedule I - Part A - Contributions Received From Political Committees ($50.01 to $250.00)']
</code></pre>
</div>

<p>Let’s look at just expenditures for now. (Keep reading… this isn’t the actual number.)</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">aldccc3_expenditures</span> <span class="o">=</span> <span class="n">at_large_dem_cc_cycle3</span><span class="p">[</span><span class="n">at_large_dem_cc_cycle3</span><span class="o">.</span><span class="n">DocType</span><span class="o">.</span><span class="nb">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">'Expenditures'</span><span class="p">)]</span>
<span class="k">print</span> <span class="s">'Number of expenditures by all dem at large city council candidates during cycle 3: '</span>\
        <span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">aldccc3_expenditures</span><span class="p">))</span>
<span class="k">print</span> <span class="s">'Total spending by those candidates: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">aldccc3_expenditures</span><span class="o">.</span><span class="n">Amount</span><span class="o">.</span><span class="nb">sum</span><span class="p">())</span></code></pre></figure>

<div class="highlighter-rouge"><pre class="highlight"><code>Number of expenditures by all dem at large city council candidates during cycle 3: 1081
Total spending by those candidates: 2910301.4
</code></pre>
</div>

<p>This is not an unbelievable number, but it seemed high to me. I took a peak inside the actual data and found many lines are duplicated when the <code class="highlighter-rouge">Amended</code> column is marked yes. It appears the Year-To-Date data keeps all filing submissions including those that are amended. So I wrote the following function to filter out the amended lines.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">filter_amends</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="s">"""
    df is a ytd data frame including amended reports.
    This function filters out duplicate information in amendment stages and
    keeps only the latest data.
    Pseudocode:
        -for each cycle check for each filer check if amended records
            -if filer in cycle had an amended record get most recent subdate:
                keep those lines
            -if filer had no amendments in cycle keep those lines
    returns a list of indices of lines in dataframe corresponding to latest
    filing data
    """</span>
    <span class="n">indices_to_keep</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([],</span><span class="n">dtype</span><span class="o">=</span><span class="s">'int64'</span><span class="p">)</span>
    <span class="n">cycles</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">Cycle</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cycles</span><span class="p">:</span>
        <span class="n">filers</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">Cycle</span><span class="o">==</span><span class="n">c</span><span class="p">]</span><span class="o">.</span><span class="n">FilerName</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
        <span class="n">dfc</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">df</span><span class="o">.</span><span class="n">Cycle</span><span class="o">==</span><span class="n">c</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">filers</span><span class="p">:</span>
            <span class="n">dfcf</span> <span class="o">=</span> <span class="n">dfc</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">dfc</span><span class="o">.</span><span class="n">FilerName</span><span class="o">==</span><span class="n">f</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">np</span><span class="o">.</span><span class="nb">sum</span><span class="p">(</span><span class="n">dfcf</span><span class="o">.</span><span class="n">Amended</span><span class="o">.</span><span class="nb">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">'Y|y'</span><span class="p">,</span><span class="n">na</span><span class="o">=</span><span class="bp">False</span><span class="p">)):</span>
                <span class="c">#print "amended: " + str(dfcf.SubDate.max())</span>
                <span class="n">maxdate</span> <span class="o">=</span> <span class="n">dfcf</span><span class="o">.</span><span class="n">SubDate</span><span class="o">.</span><span class="nb">max</span><span class="p">()</span>
                <span class="c">#print 'amended: '+str(dfcf.loc[dfcf.SubDate == maxdate].index)</span>
                <span class="n">indices_to_keep</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">indices_to_keep</span><span class="p">,</span><span class="n">dfcf</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">dfcf</span><span class="o">.</span><span class="n">SubDate</span> <span class="o">==</span> <span class="n">maxdate</span><span class="p">]</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c">#print "not amended"</span>
                <span class="n">indices_to_keep</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">indices_to_keep</span><span class="p">,</span><span class="n">dfcf</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">indices_to_keep</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">fytddata</span> <span class="o">=</span> <span class="n">ytddata</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">filter_amends</span><span class="p">(</span><span class="n">ytddata</span><span class="p">)]</span>
<span class="n">cycle3_data</span> <span class="o">=</span> <span class="n">fytddata</span><span class="p">[</span><span class="n">fytddata</span><span class="o">.</span><span class="n">Cycle</span><span class="o">==</span><span class="mi">3</span><span class="p">]</span>
<span class="n">at_large_dem_cc_cycle3</span> <span class="o">=</span> <span class="n">cycle3_data</span><span class="p">[</span><span class="n">cycle3_data</span><span class="o">.</span><span class="n">FilerName</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">dem_tags</span><span class="o">.</span><span class="n">Filers</span><span class="o">.</span><span class="n">values</span><span class="p">)]</span>
<span class="n">aldccc3_expenditures</span> <span class="o">=</span> <span class="n">at_large_dem_cc_cycle3</span><span class="p">[</span><span class="n">at_large_dem_cc_cycle3</span><span class="o">.</span><span class="n">DocType</span><span class="o">.</span><span class="nb">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="s">'Expenditures'</span><span class="p">)]</span>
<span class="k">print</span> <span class="s">'Number of expenditures by all dem at large city council candidates during cycle 3: '</span>\
        <span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">aldccc3_expenditures</span><span class="p">))</span>
<span class="k">print</span> <span class="s">'Total spending by those candidates: '</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">aldccc3_expenditures</span><span class="o">.</span><span class="n">Amount</span><span class="o">.</span><span class="nb">sum</span><span class="p">())</span></code></pre></figure>

<div class="highlighter-rouge"><pre class="highlight"><code>Number of expenditures by all dem at large city council candidates during cycle 3: 909
Total spending by those candidates: 2675434.78
</code></pre>
</div>

<p>Not much lower, but that’s the best I can discern for now.<br />
Let’s filter the voting data now and compute the voter percentages.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">dcc_primary_votedata</span> <span class="o">=</span> <span class="n">primary_2015</span><span class="p">[</span><span class="n">primary_2015</span><span class="o">.</span><span class="n">CANDIDATE</span><span class="o">.</span><span class="n">isin</span><span class="p">(</span><span class="n">dem_tags</span><span class="o">.</span><span class="n">VotesName</span><span class="o">.</span><span class="n">values</span><span class="p">)]</span>
<span class="n">tot_votes</span> <span class="o">=</span> <span class="n">dcc_primary_votedata</span><span class="o">.</span><span class="n">VOTE</span><span class="o">.</span><span class="nb">sum</span><span class="p">()</span>
<span class="k">print</span> <span class="s">"Total number of votes: "</span> <span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">tot_votes</span><span class="p">)</span> <span class="c">#this is all votes (not all voters)</span>
<span class="n">cgroup</span> <span class="o">=</span> <span class="n">dcc_primary_votedata</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'CANDIDATE'</span><span class="p">)</span><span class="o">.</span><span class="nb">sum</span><span class="p">()</span>
<span class="n">vote_pcts</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span><span class="o">*</span><span class="n">dcc_primary_votedata</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'CANDIDATE'</span><span class="p">)</span><span class="o">.</span><span class="nb">sum</span><span class="p">()[</span><span class="s">'VOTE'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="o">/</span><span class="n">tot_votes</span><span class="p">)</span>
<span class="n">cgroup</span> <span class="o">=</span> <span class="n">cgroup</span><span class="o">.</span><span class="n">drop</span><span class="p">([</span><span class="s">'WARD'</span><span class="p">,</span><span class="s">'DIVISION'</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">cgroup</span><span class="p">[</span><span class="s">'VOTE_PCT'</span><span class="p">]</span> <span class="o">=</span> <span class="n">vote_pcts</span>
<span class="k">print</span> <span class="n">cgroup</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s">'VOTE_PCT'</span><span class="p">)</span></code></pre></figure>

<div class="highlighter-rouge"><pre class="highlight"><code>Total number of votes: 643951
                          VOTE  VOTE_PCT
CANDIDATE                               
MARNIE AUMENT LOUGHREY   10890  0.016911
CARLA M CAIN             17115  0.026578
WILSON ALEXANDER         19210  0.029831
FRANK RIZZO              26260  0.040780
THOMAS WYATT             30310  0.047069
JENNE AYERS              32637  0.050682
PAUL STEINKE             37104  0.057619
ED NEILSON               40786  0.063337
SHERRIE COHEN            45847  0.071196
W WILSON GOODE JR        46555  0.072296
ISAIAH THOMAS            48000  0.074540
HELEN GYM                49270  0.076512
WILLIAM K GREENLEE       50849  0.078964
ALLAN DOMB               57691  0.089589
BLONDELL REYNOLDS BROWN  62922  0.097712
DEREK S GREEN            68505  0.106382
</code></pre>
</div>

<p>This is consistent with the voter percentages on the city commisioners website <label for="philly-votes" class="margin-toggle"> ⊕</label><input type="checkbox" id="philly-votes" class="margin-toggle" /><span class="marginnote"><a href="http://www.philadelphiavotes.com/">http://www.philadelphiavotes.com/</a> </span>.</p>

<h2 id="analysis-part-1">Analysis part 1</h2>
<p>Let’s see what’s in the description of those expenditures.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">aldccc3_expenditures</span><span class="o">.</span><span class="n">Description</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()[:</span><span class="mi">25</span><span class="p">]</span></code></pre></figure>

<div class="highlighter-rouge"><pre class="highlight"><code>Credit Card Processing Fee    108
Election Day Salary           101
Election Day Expenses          45
GOTV field work                44
Donation                       37
GOTV                           36
Salary                         25
Parking                        22
Consulting                     22
Election Day field             21
Contribution                   21
Advertising                    20
Printing                       19
Office Supplies                11
Election Day                   10
Gas                             7
Advertisements                  7
Mail &amp; Media Services           7
Contribution Refund             7
Campaign Materials              6
Field Expenses                  6
Taxi                            5
Stipend                         5
Service Fee                     5
Payroll                         4
Name: Description, dtype: int64
</code></pre>
</div>

<p>There are a lot of questions one could ask. The <code class="highlighter-rouge">value_counts</code> function matches values exactly, so differences in capitalization will create new lines. And there are many other entries that probably mean identitical things, e.g., “GOTV” and “GOTV field work” and probably “Election Day Salary”. It’s hard to say given the current filing system.</p>

<h2 id="add-voter-data-tag-to-campaign-finances">Add Voter data tag to campaign finances</h2>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">add_vote_name</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="n">x</span><span class="p">[</span><span class="s">'VotesName'</span><span class="p">]</span><span class="o">=</span><span class="n">dem_tags</span><span class="p">[</span><span class="n">dem_tags</span><span class="o">.</span><span class="n">Filers</span><span class="o">.</span><span class="nb">str</span><span class="o">.</span><span class="n">contains</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="s">'FilerName'</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">])]</span><span class="o">.</span><span class="n">VotesName</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">x</span>
<span class="n">aldccc3_vname</span> <span class="o">=</span> <span class="n">at_large_dem_cc_cycle3</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s">'FilerName'</span><span class="p">)</span><span class="o">.</span><span class="nb">apply</span><span class="p">(</span><span class="n">add_vote_name</span><span class="p">)</span></code></pre></figure>

<p>In playing with the data some at this point, I noticed a couple of Council Candidates are missing data… Marnie Aument Loughrey did not file a cycle 3 report at all. This is consistent with the absence of a folder with her name in the directory at: <a href="ftp://ftp.phila-records.com/2015/Cycle%203/">ftp://ftp.phila-records.com/2015/Cycle%203/</a> I also found W. Wilson Goode Jr. had no expenses in cycle 3 according to his report. They wil be excluded from the plots below.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">dtsums</span> <span class="o">=</span> <span class="n">aldccc3_vname</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s">'VotesName'</span><span class="p">,</span><span class="s">'DocType'</span><span class="p">])[</span><span class="s">'Amount'</span><span class="p">]</span><span class="o">.</span><span class="nb">sum</span><span class="p">()</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">expenseslist</span> <span class="o">=</span> <span class="n">cgroup</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">dtsums</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">levels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">dtsums</span><span class="p">[:,</span><span class="s">'CFR - Schedule III - Statement of Expenditures'</span><span class="p">]:</span>
        <span class="n">expenseslist</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">name</span><span class="p">,</span><span class="s">'Expense'</span><span class="p">]</span><span class="o">=</span><span class="n">dtsums</span><span class="p">[</span><span class="n">name</span><span class="p">,</span><span class="s">'CFR - Schedule III - Statement of Expenditures'</span><span class="p">]</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">expenseslist</span></code></pre></figure>

<div>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>VOTE</th>
      <th>VOTE_PCT</th>
      <th>Expense</th>
    </tr>
    <tr>
      <th>CANDIDATE</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ALLAN DOMB</th>
      <td>57691</td>
      <td>0.089589</td>
      <td>1546447.86</td>
    </tr>
    <tr>
      <th>BLONDELL REYNOLDS BROWN</th>
      <td>62922</td>
      <td>0.097712</td>
      <td>7500.20</td>
    </tr>
    <tr>
      <th>CARLA M CAIN</th>
      <td>17115</td>
      <td>0.026578</td>
      <td>280.00</td>
    </tr>
    <tr>
      <th>DEREK S GREEN</th>
      <td>68505</td>
      <td>0.106382</td>
      <td>92689.04</td>
    </tr>
    <tr>
      <th>ED NEILSON</th>
      <td>40786</td>
      <td>0.063337</td>
      <td>60258.56</td>
    </tr>
    <tr>
      <th>FRANK RIZZO</th>
      <td>26260</td>
      <td>0.040780</td>
      <td>12121.19</td>
    </tr>
    <tr>
      <th>HELEN GYM</th>
      <td>49270</td>
      <td>0.076512</td>
      <td>225899.67</td>
    </tr>
    <tr>
      <th>ISAIAH THOMAS</th>
      <td>48000</td>
      <td>0.074540</td>
      <td>107939.81</td>
    </tr>
    <tr>
      <th>JENNE AYERS</th>
      <td>32637</td>
      <td>0.050682</td>
      <td>7979.35</td>
    </tr>
    <tr>
      <th>MARNIE AUMENT LOUGHREY</th>
      <td>10890</td>
      <td>0.016911</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>PAUL STEINKE</th>
      <td>37104</td>
      <td>0.057619</td>
      <td>147315.94</td>
    </tr>
    <tr>
      <th>SHERRIE COHEN</th>
      <td>45847</td>
      <td>0.071196</td>
      <td>194089.34</td>
    </tr>
    <tr>
      <th>THOMAS WYATT</th>
      <td>30310</td>
      <td>0.047069</td>
      <td>195789.44</td>
    </tr>
    <tr>
      <th>W WILSON GOODE JR</th>
      <td>46555</td>
      <td>0.072296</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>WILLIAM K GREENLEE</th>
      <td>50849</td>
      <td>0.078964</td>
      <td>76591.44</td>
    </tr>
    <tr>
      <th>WILSON ALEXANDER</th>
      <td>19210</td>
      <td>0.029831</td>
      <td>532.94</td>
    </tr>
  </tbody>
</table>
</div>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="n">matplotlib</span> <span class="n">inline</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">expenseslist</span><span class="o">.</span><span class="n">Expense</span><span class="p">,</span><span class="n">expenseslist</span><span class="o">.</span><span class="n">VOTE_PCT</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Total Candidate Spending vs. Vote </span><span class="si">%</span><span class="s">'</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Candidate Spending (</span><span class="err">\</span><span class="s">$)'</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'Candidate Vote Percentage'</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'both'</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s">'major'</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span></code></pre></figure>

<p><img src="/images/basic-vote-analysis-2015-01-13_files/basic-vote-analysis-2015-01-13_27_0.png" alt="png" /></p>

<p>Ok, one candidate (Alan Domb) outspent the next candidate by a factor of 10.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">expenseslist</span><span class="o">.</span><span class="n">Expense</span><span class="p">),</span><span class="n">expenseslist</span><span class="o">.</span><span class="n">VOTE_PCT</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s">'Total Candidate Spending vs. Vote </span><span class="si">%</span><span class="s">'</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s">'Log Candidate Spending (</span><span class="err">\</span><span class="s">$)'</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s">'Candidate Vote Percentage'</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'x'</span><span class="p">,</span> <span class="n">pad</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s">'both'</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s">'major'</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span></code></pre></figure>

<p><img src="/images/basic-vote-analysis-2015-01-13_files/basic-vote-analysis-2015-01-13_29_0.png" alt="png" /></p>

<p>Well… that’s a pretty substanial return to dollars spent overall and I suspect the spending sums for some of those points is inaccurate (low).<br />
There is much more that can be discovered in this data as Tom Ferrick has <a href="http://mobile.philly.com/beta?wss=/philly/news/politics/mayor&amp;id=337265201">pointed</a> <a href="http://www.philly.com/philly/news/politics/mayor/Ferrick_Election_Day_A_big_payday_for_Philly_political_bosses.html">out</a>.</p>



    </article>
    <span class="print-footer">Votes and Spending&#58;</br> The 2015 Philadelphia Democratic Primary City Council Race - January 18, 2016 - Zoey S. Davidson</span>
    <footer>
  <hr class="slender">
  <ul class="footer-links">
    <li><a href="mailto:zoeith_@_zoeith.com"><span class="icon-mail"></span></a></li>    
    
      <li>
        <a href="//scholar.google.com/citations?hl=en&user=tu9XJuEAAAAJ"><span class="icon-google-scholar"></span></a>
      </li>
    
      <li>
        <a href="//www.twitter.com/zoeith"><span class="icon-twitter"></span></a>
      </li>
    
      <li>
        <a href="//github.com/zoeith"><span class="icon-github"></span></a>
      </li>
    
      <li>
        <a href="/feed.xml"><span class="icon-feed"></span></a>
      </li>
      
  </ul>
<div class="credits">
<span> ZOEY S. DAVIDSON &nbsp;&vert;&nbsp; 2016</span></br> <br>
<span>This site created with the <a href="//github.com/clayh53/tufte-jekyll">Tufte theme </a> in <a href="//jekyllrb.com">Jekyll</a>.</span> 
</div>  
</footer>

  </body>
</html>
